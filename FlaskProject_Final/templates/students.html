{% extends "layout.html" %}

{% block content %}
<div class="container py-4">

  <h2 class="text-warning mb-3">Ã–ÄŸrenciler</h2>

  <!-- ðŸ” ARAMA FORMU -->
  <form method="get" class="row g-2 mb-4">
    <div class="col">
      <input type="text" name="q" value="{{ q or '' }}" class="form-control"
             placeholder="Ä°sim, soyisim veya numara ara">
    </div>
    <div class="col-auto">
      <button class="btn btn-info">Ara</button>
    </div>
  </form>

  <table class="table table-dark table-striped table-hover">
    <thead>
      <tr>
        <th>#</th>
        <th>Numara</th>
        <th>Ä°sim</th>
        <th>Soyisim</th>
        <th>Telefon NumarasÄ±</th>
        <th>SÄ±nÄ±f Bilgisi</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
    {% for s in students %}
      <tr>
        <td>{{ loop.index }}</td>
        <td>
          <a href="{{ url_for('students.view_student', id=s.id) }}" class="text-decoration-none text-info">
            {{ s.number }}
          </a>
        </td>
        <td>{{ s.name }}</td>
        <td>{{ s.surname }}</td>
        <td>{{ s.phone_number }}</td>
        <td>
          {% if s.grade == 5 %}
            <span class="badge bg-secondary">Mezun</span>
          {% else %}
            <span class="badge bg-primary">{{ s.grade }}. SÄ±nÄ±f</span>
          {% endif %}
        </td>
        <td>
          <a href="{{ url_for('students.delete_student', id=s.id) }}" 
             class="btn btn-sm btn-danger" 
             onclick="return confirm('Ã–ÄŸrenciyi silmek istediÄŸinize emin misiniz?');">
             Sil
          </a>
        </td>
      </tr>
    {% else %}
      <tr>
        <td colspan="7" class="text-center text-muted">HenÃ¼z Ã¶ÄŸrenci yok</td>
      </tr>
    {% endfor %}
    </tbody>
  </table>

  <hr class="my-5">

  <h5 class="mb-3">Yeni Ã–ÄŸrenci Ekle</h5>
  <form action="{{ url_for('students.add_student') }}" method="post" class="row g-3 w-75 mx-auto">
    <div class="col-md-2">
      <input name="number" class="form-control" placeholder="Numara" required>
    </div>
    <div class="col-md-2">
      <input name="name" class="form-control" placeholder="Ä°sim" required>
    </div>
    <div class="col-md-2">
      <input name="surname" class="form-control" placeholder="Soyisim" required>
    </div>
    <div class="col-md-3">
      <input name="phone_number" class="form-control" placeholder="Telefon NumarasÄ±"
             pattern="\+?\d{10,15}" title="Telefon numarasÄ±nÄ± doÄŸru formatta giriniz.">
    </div>
    <div class="col-md-2">
      <select name="grade" class="form-select" required>
        <option value="1">1. SÄ±nÄ±f</option>
        <option value="2">2. SÄ±nÄ±f</option>
        <option value="3">3. SÄ±nÄ±f</option>
        <option value="4">4. SÄ±nÄ±f</option>
        <option value="5">Mezun</option>
      </select>
    </div>
    <div class="col-md-1 d-grid">
      <button type="submit" class="btn btn-success">Ekle</button>
    </div>
  </form>

</div>
{% endblock %}
